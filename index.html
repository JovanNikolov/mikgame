<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Инспектор за Фишинг</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><circle cx='26' cy='26' r='18' fill='none' stroke='%236d675f' stroke-width='6'/><line x1='40' y1='40' x2='58' y2='58' stroke='%236d675f' stroke-width='6' stroke-linecap='round'/></svg>">

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/email-viewer.css">
    <link rel="stylesheet" href="css/inspector-tools.css">
    <link rel="stylesheet" href="css/ui-components.css">
</head>
<body>
    <div id="start-screen" class="screen">
        <div class="start-content">
            <h1>Инспектор за Фишинг</h1>
            <p class="subtitle">Заштитете ја организацијата од фишинг напади</p>
            <p class="instructions">
                Внимателно прегледајте ги е-пораките и одлучете дали да ги ОДОБРИТЕ или ОТФРЛИТЕ.<br>
                Користете ги алатките за инспекција за да ги проверите заглавијата, линковите и прилозите.<br>
                Три грешки и ве бркаме од работа!
            </p>
            <button id="btn-start-game" class="btn-primary">Прифати ја понудата за работа</button>
        </div>
    </div>

    <div id="game-screen" class="screen hidden">
        <header class="game-header">
            <div class="stat-group">
                <span class="stat-label">Ниво:</span>
                <span id="stat-level" class="stat-value">1</span>
                <span> </span>
            </div>
            <div class="stat-group">
                <span class="stat-label">Поени:</span>
                <span id="stat-score" class="stat-value">0</span>
                <span> </span>
            </div>
            <div class="stat-group">
                <span class="stat-label">Грешки:</span>
                <span id="stat-strikes" class="stat-value">
                    <span class="strike-indicator">○○○</span>
                </span>
                <span> </span>
            </div>
            <div class="stat-group">
                <span class="stat-label">Напредок:</span>
                <span id="stat-progress" class="stat-value">0/10</span>
            </div>
        </header>

        <main class="game-container">
            <section class="email-panel">
                <div class="email-viewer">
                    <div class="email-header-section">
                        <div class="email-field">
                            <span class="field-label">Од:</span>
                            <span id="email-from-name" class="field-value"></span>
                            <span id="email-from-address" class="field-value-secondary"></span>
                        </div>
                        <div class="email-field">
                            <span class="field-label">До:</span>
                            <span id="email-to-name" class="field-value"></span>
                            <span id="email-to-address" class="field-value-secondary"></span>
                        </div>
                        <div class="email-field">
                            <span class="field-label">Наслов:</span>
                            <span id="email-subject" class="field-value"></span>
                        </div>
                        <div class="email-field">
                            <span class="field-label">Датум:</span>
                            <span id="email-date" class="field-value-secondary"></span>
                        </div>
                    </div>

                    <div class="email-body-section">
                        <div id="email-body" class="email-body"></div>
                    </div>

                    <div id="email-links-section" class="email-links-section hidden">
                        <div class="section-title">Линкови:</div>
                        <div id="email-links-container"></div>
                    </div>

                    <div id="email-attachments-section" class="email-attachments-section hidden">
                        <div class="section-title">Прилози:</div>
                        <div id="email-attachments-container"></div>
                    </div>
                </div>
            </section>

            <section class="inspector-panel">
                <div class="inspector-tools">
                    <div class="tool-section">
                        <h3 class="tool-title">Анализа на Заглавија</h3>
                        <div class="tool-content">
                            <div class="header-item">
                                <span class="header-label">SPF Резултат:</span>
                                <span id="header-spf" class="header-value"></span>
                            </div>
                            <div class="header-item">
                                <span class="header-label">DKIM Резултат:</span>
                                <span id="header-dkim" class="header-value"></span>
                            </div>
                            <div class="header-item">
                                <span class="header-label">Патека за Враќање:</span>
                                <span id="header-return-path" class="header-value"></span>
                            </div>
                            <div class="header-item">
                                <span class="header-label">Примено Од:</span>
                                <span id="header-received" class="header-value"></span>
                            </div>
                        </div>
                    </div>

                    <div class="tool-section">
                        <h3 class="tool-title">Инспектор за Линкови</h3>
                        <div id="link-inspector-content" class="tool-content">
                            <p class="hint-text">Поставете го покажувачот врз линковите за да ги инспектирате</p>
                        </div>
                    </div>

                    <div class="tool-section">
                        <h3 class="tool-title">Безбедносна Листа</h3>
                        <div class="tool-content">
                            <ul class="security-checklist">
                                <li>Проверете ја е-адресата на испраќачот</li>
                                <li>Проверете за генерички поздрави</li>
                                <li>Барајте итни/заканувачки пораки</li>
                                <li>Инспектирајте ги дестинациите на линковите</li>
                                <li>Проверете ја автентикацијата (SPF/DKIM)</li>
                                <li>Испитајте ги типовите на прилозите</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="decision-panel">
            <button id="btn-approve" class="btn-decision btn-approve" disabled>
                <span class="btn-icon">✓</span>
                <span class="btn-text">ОДОБРИ</span>
                <span class="btn-hint">(A)</span>
            </button>
            <button id="btn-reject" class="btn-decision btn-reject" disabled>
                <span class="btn-icon">✗</span>
                <span class="btn-text">ОТФРЛИ</span>
                <span class="btn-hint">(R)</span>
            </button>
        </footer>
    </div>

    <div id="feedback-overlay" class="overlay hidden">
        <div class="feedback-modal">
            <div id="feedback-result" class="feedback-result"></div>
            <div id="feedback-explanation" class="feedback-explanation"></div>
            <div id="feedback-indicators" class="feedback-indicators"></div>
            <button id="btn-continue" class="btn-primary">Продолжи</button>
        </div>
    </div>

    <div id="level-complete-screen" class="screen hidden">
        <div class="level-complete-content">
            <h2>Нивото е Завршено!</h2>
            <div class="level-stats">
                <div class="stat-row">
                    <span>Точност:</span>
                    <span id="level-accuracy"></span>
                </div>
                <div class="stat-row">
                    <span>Точни Одлуки:</span>
                    <span id="level-correct"></span>
                </div>
                <div class="stat-row">
                    <span>Заработени Поени:</span>
                    <span id="level-score-earned"></span>
                </div>
            </div>
            <button id="btn-next-level" class="btn-primary">Следно Ниво</button>
        </div>
    </div>

    <div id="game-over-screen" class="screen hidden">
        <div class="game-over-content">
            <h2>Играта Заврши</h2>
            <p id="game-over-message"></p>
            <div class="final-stats">
                <div class="stat-row">
                    <span>Финален Резултат:</span>
                    <span id="final-score"></span>
                </div>
                <div class="stat-row">
                    <span>Достигнато Ниво:</span>
                    <span id="final-level"></span>
                </div>
            </div>
            <button id="btn-retry" class="btn-primary">Обиди се Повторно</button>
        </div>
    </div>

    <div id="victory-screen" class="screen hidden">
        <div class="victory-content">
            <h2>Победа!</h2>
            <p>Честитки! Ги завршивте сите нивоа и ја заштитивте организацијата од фишинг напади!</p>
            <div class="final-stats">
                <div class="stat-row">
                    <span>Финален Резултат:</span>
                    <span id="victory-score"></span>
                </div>
                <div class="stat-row">
                    <span>Вкупна Точност:</span>
                    <span id="victory-accuracy"></span>
                </div>
            </div>
            <button id="btn-play-again" class="btn-primary">Играј Повторно</button>
        </div>
    </div>

    <script type="module" src="js/game-state.js"></script>
    <script type="module" src="js/data/email-templates.js"></script>
    <script type="module" src="js/data/phishing-patterns.js"></script>
    <script type="module" src="js/data/level-config.js"></script>
    <script type="module" src="js/phishing-rules.js"></script>
    <script type="module" src="js/email-generator.js"></script>
    <script type="module" src="js/level-manager.js"></script>
    <script type="module" src="js/ui-controller.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
